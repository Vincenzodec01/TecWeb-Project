{% extends 'base.html' %}

{% block link_style %}

<style>
@import url('https://fonts.googleapis.com/css?family=Montserrat:400,700,500&display=swap');





 .form-control:focus {
    box-shadow: 10px 0px 0px 0px #ffffff !important;
    border-color: blue;
}

.wrapper {
    max-width: 460px;
    box-shadow: 3px 3px 5px ;

}

.card {

}

p {
    margin: 0px;
}

.h8 {
    font-size: 25px;
    font-weight: 600;
    color: black;
}

.card .atm {
    width: 90px;
    height: 90px;
    object-fit: cover;
}

.card .visa {
    width: 50px;
    height: 20px;
    object-fit: fill;
}

.card .master {
    width: 50px;
    height: 50px;
    object-fit: fill;
}

.debit-card {
    width: 100%;
    height: 180px;
    padding: 20px;
    background-color: #0093E9;
    background-image: linear-gradient(160deg, #0093E9 0%, #80D0C7 100%);
    position: relative;
    border-radius: 5px;
    box-shadow: 3px 3px 5px #0000001a;
    transition: all 0.3s ease-in;
    cursor: pointer;
}

.debit-card:hover {
    box-shadow: 5px 3px 5px #000000a2;
}

.card-2 {
    background-color: #21D4FD;
    background-image: linear-gradient(116deg, #21D4FD 0%, #B721FF 100%);
}

.text-muted {
    font-size: 0.8rem;
}

.text-white {
    font-size: 14px;
}

.input {
    position: absolute;
    top: 6px;
    right: 0;
}

input[type="radio"] {
    appearance: none;
    width: 20px;
    height: 20px;
    background-color: #eee;
    position: relative;
    border-radius: 3px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none;
}

input[type="radio"]:after {
    position: absolute;
    width: 100%;
    height: 100%;
    font-family: "Font Awesome 5 Free";
    font-weight: 600;
    content: "\f00c";
    color: #fff;
    font-size: 15px;
    display: none;
}

input[type="radio"]:checked,
input[type="radio"]:checked:hover {
    background-color: blue;
}

input[type="radio"]:checked::after {
    display: flex;
    align-items: center;
    justify-content: center;
}

input[type="radio"]:hover {
    background-color: #ddd;
}


</style>

{% endblock %}

{% block body %}

<div class="container">
    <div class="row align-items-center">
        <div class="col-md-6 align-items-center mt-4">
            <form method="post" action="{{url_for('profile.mysettings')}}">
                 <div class="padding">
                        <div class="row" style="border-radius: 3rem !important;">
                            <div class="container-fluid d-flex justify-content-center">
                                <div class="col-sm-6 col-md-7" style="border-radius: 3rem !important;">
                                    <div class="card">
                                        <div class="card-header">

                                        <div class="row">
                                            <div class="col-md-6">
                                                <span>Aggiungi metodo di pagamento</span>

                                            </div>

                                            <div class="col-md-6 text-right" style="margin-top: -5px;">

                                                  <img src="https://img.icons8.com/color/36/000000/visa.png" alt="visa">
                                                  <img src="https://img.icons8.com/color/36/000000/mastercard.png" alt="mastercard">

                                            </div>

                                        </div>

                                        </div>
                                        <div class="card-body">
                                            <div class="form-group">
                                            <label for="cc-number" class="control-label">Numero di carta</label>
                                            <input name="cc-number" id="cc-number" type="tel" class="input-lg form-control cc-number" autocomplete="cc-number" placeholder="&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;" required>
                                          </div>

                                          <div class="row">

                                            <div class="col-md-6">
                                                 <div class="form-group">
                                                    <label for="cc-exp" class="control-label">Scadenza</label>
                                                    <input name="cc-exp" id="cc-exp" type="tel" class="input-lg form-control cc-exp" autocomplete="cc-exp" placeholder="&bull;&bull; / &bull;&bull;" required>
                                                  </div>


                                            </div>

                                             <div class="col-md-6">
                                               <div class="form-group">
                                                <label for="cc-cvc" class="control-label">CVC</label>
                                                <input name="cc-cvc" id="cc-cvc" type="tel" class="input-lg form-control cc-cvc" autocomplete="off" placeholder="&bull;&bull;&bull;&bull;" required>
                                              </div>
                                            </div>

                                          </div>


                                          <div class="form-group">
                                            <label for="numeric" class="control-label">Nome carta</label>
                                            <input name="cc-name" id="numeric" type="text" class="input-lg form-control">
                                          </div>

                                            <div class="mt-2">
                                               <button name="sub_method" value="Aggiungi" type="submit" class="btn btn-primary " style="font-size: .8rem; width: 100%; height: 2.4rem">Aggiungi</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>
            </form>
        </div>
        {% if cards %}
        <div class="col-md-6 align-items-center mt-4">
            <div class="wrapper">
                <div class="card px-4">
                    <div class=" my-3">
                        <p class="h8">Metodi di pagamento</p>

                    </div>

                    {% for card in cards %}
                    <div class="debit-card mb-3">
                        <div class="d-flex flex-column h-100">
                                <div class="d-flex position-relative">
                                    <div class="">
                                        {% if card[3] == 'visa' %}
                                        <img src="https://www.freepnglogos.com/uploads/visa-inc-logo-png-11.png" class="visa" alt="">
                                        {% else %}
                                        <img src="https://www.freepnglogos.com/uploads/mastercard-inc-logo-png-11.png" class="master" alt="">
                                        {% endif %}
                                        <p class="mt-2 mb-4 text-white fw-bold">{{card[2]}}</p>
                                    </div>

                                </div>
                            <div class="mt-auto fw-bold d-flex align-items-center justify-content-between">
                                <p>{{card[0]}}</p>
                                <p>{{card[1]}}</p>
                            </div>
                        </div>
                        <div class="position-absolute top-0 end-0 m-2">
                            <form id="delete_cc" method="post" action="{{url_for('profile.mysettings')}}">
                                <input hidden value="{{card[0]}}" name="cc-number-del">
                                <a onclick="submit_cc_delete()" href="#">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                                      <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>
                                    </svg>
                                </a>
                            </form>
                        </div>

                    </div>
                    {% endfor %}

                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}


{% block script_body %}
<script href="https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/3.0.0/jquery.payment.min.js"></script>
<script>
    function submit_cc_delete() {
        $('#delete_cc').submit()
    }
</script>
{% endblock %}